# Асинхронный клиент для подключения к чату

Проект представляет собой программу с графическим интерфейсом для подключения к чату в Интернете по нестандартному протоколу.

## Как установить

Для работы программы у вас должен быть установлен Python версии 3.8.

Скачайте код с GitHub.

Создайте виртуальное окружение и активируйте его. 
Для этого откройте терминал Linux или консоль Windows, перейдите командой `cd` в папку со скачанной программой и выполните следующие команды -
для Linux:

```bash
python3 -m venv venv
source venv/bin/activate
```

для Windows:

```bash
python -m venv venv
cd venv/Scripts
activate
cd ../..
```

Установите в активированном виртуальном окружении зависимости с помощью `pip`:
```bash
pip install -r requirements.txt
```

## Как запустить

Для запуска программы наберите в командной строке терминала/консоли с активированным виртуальным окружением команду:
```bash
python main.py [-t USER_TOKEN] [-rh READER_HOST] [-rp READER_PORT] [-sh SENDER_HOST] [-sp SENDER_PORT] [-f HISTORY_FILEPATH]
```

Аргументы командной строки описаны ниже в разделе `Настройки чата`. 

Токен `USER_TOKEN` для этого скрипта должен быть указан либо в командной строке, либо в файле `.env` с переменными окружения, либо в файле `user_token.json`. Параметр командной строки имеет более высокий приоритет, чем переменная окружения из файла `.env`, а переменная окружения из файла `.env` - более высокий приоритет, чем файл `user_token.json`.

Остальные аргументы командной строки являются необязательными - если не указать аргумент, то его значение будет взято из соответствующей переменной окружения в файле `.env` или присвоено по умолчанию.

После запуска программы откроется окно, в котором вы будете видеть все сообщения из чата в реальном времени. Одновременно история переписки будет сохраняться в файле с именем, указанным в аргументе `HISTORY_FILEPATH`.

## Настройки чата

Вы можете передавать параметры чата как параметры командной строки или как переменные окружения.

Параметры командной строки имеют более высокий приоритет, чем переменные окружения.

Чтобы определить переменные окружения, создайте файл `.env` в той же папке, где и скрипты, и запишите туда данные в таком формате: `ПЕРЕМЕННАЯ=значение`.

Доступны следующие переменные окружения:

- `READER_HOST` - хост для чтения сообщений из чата; по умолчанию `minechat.dvmn.org`;
- `READER_PORT` - порт для чтения сообщений из чата; по умолчанию `5000`;
- `SENDER_HOST` - хост для отправки сообщений в чат; по умолчанию `minechat.dvmn.org`;
- `SENDER_PORT` - порт для отправки сообщений в чат; по умолчанию `5050`;
- `USER_TOKEN` - токен пользователя для отправки сообщений в чат; значение по умолчанию отсутствует;
- `HISTORY_FILEPATH` - путь к файлу для сохранения истории переписки; по умолчанию `history.txt`.

## Цели проекта

Код написан в учебных целях — это урок в курсе по Python и веб-разработке на сайте [Devman](https://dvmn.org).
